<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hollandé©—ï¼ˆ10é¡Œï¼‰</title>
 <style>
:root{
  /* Base */
  --bg:#fbfbfd;
  --ink:#0f172a;
  --muted:#667085;
  --card:#ffffff;
  --line:#e6eaf2;

  /* Cover (æ©˜è‰²ç³») */
  --coverMain:#f59e0b;
  --coverSub:#fbbf24;
  --coverSoft:#fff7e6;
  --coverDeep:#ea580c;

  /* Brand / Accentï¼ˆteal + indigoï¼‰ */
  --accent:#1fa8a8;
  --accent2:#4f46e5;
  --accentSoft:#e6f7f7;
  --accentSoft2:#eef2ff;

  /* Result header / name bar */
  --purple: linear-gradient(135deg, #1fa8a8, #4f46e5);
  --bluebar:#eaf6ff;

  /* Shadow / radius */
  --shadow: 0 10px 28px rgba(15,23,42,.08);
  --radius:16px;

  /* RIASEC bar colors */
  --cE:#f2b35e;
  --cC:#f29d8f;
  --cI:#70b7ff;
  --cS:#63c6b5;
  --cR:#7f9cff;
  --cA:#c48cf2;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
  background: #fff7e6;  /* å¥¶æ²¹æ·¡æ©˜ */
  color:var(--ink);
  min-height:100vh;
  display:flex;
  justify-content:center;
}


.wrap{width:min(1020px, 100%); padding:18px 14px 70px}
/* é¡Œç›®é ï¼šåŠ ä¸€é»æ·¡æ·¡åº•è‰²ï¼ˆåªå½±éŸ¿é¡Œç›®å€ï¼‰ */
#pageCard{
  background: linear-gradient(180deg, rgba(245,158,11,.06), rgba(79,70,229,.03));
  border-radius: 22px;
  padding: 14px;
}

/* è®“å…§å±¤ card é‚„æ˜¯ç™½çš„ã€æµ®èµ·ä¾† */
#pageCard .card{
  background: #fff;
}

/* top step header */
.topbar{
  display:flex;gap:14px;align-items:center;justify-content:space-between;
  padding:14px 16px;border:1px solid var(--line);
  background: rgba(255,255,255,.85);
  border-radius:var(--radius);
  box-shadow: var(--shadow);
  position:sticky;top:10px;z-index:10;backdrop-filter: blur(10px);
  margin-bottom:14px;
}
.title{display:flex;flex-direction:column;gap:6px}
.title h1{margin:0;font-size:18px;font-weight:900}
.title p{margin:0;color:var(--muted);font-size:12.5px;line-height:1.3}
.progress{min-width:260px;display:flex;flex-direction:column;gap:8px;align-items:flex-end}
.ptext{color:var(--muted);font-size:12.5px}
.bar{width:260px;height:10px;border-radius:999px;background:#eef2ff;border:1px solid var(--line);overflow:hidden}
.bar > div{
  height:100%;
  width:0;
  background: linear-gradient(90deg, var(--accent2), var(--accent));
  border-radius:999px;
}
@media (max-width:860px){ .progress{min-width:180px} .bar{width:180px} }

/* question card */
.card{
  border:1px solid var(--line);
  background: var(--card);
  border-radius:var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
    background: rgba(255,255,255,.92);

}
.hd{
  padding:14px 16px;border-bottom:1px solid var(--line);
  display:flex;gap:12px;align-items:flex-start;justify-content:space-between
}
.qno{
  font-weight:900;
  color:#fff;
  background: rgba(79,70,229,.92);
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  white-space:nowrap
}
.qtext{flex:1}
.qtext .qtitle{margin:0 0 6px;font-weight:900}
.qtext .qdesc{margin:0;color:var(--muted);font-size:13px;line-height:1.55}
.body{padding:14px 16px}
.hint{color:var(--muted);font-size:12.5px;margin:0 0 10px;line-height:1.45}

/* sort UI */
.rankbox{display:grid;grid-template-columns:repeat(6, minmax(0,1fr));gap:10px;margin-bottom:12px}
.slot{
  border:1px dashed rgba(109,118,138,.35);
  background: #fbfcff;
  border-radius:14px;
  min-height:62px;
  padding:8px 8px 10px;
  display:flex;flex-direction:column;gap:6px;justify-content:center
}
.slot .lab{font-size:11px;color:var(--muted)}
.slot .pick{
  font-size:13px;font-weight:900;line-height:1.15;
  display:flex;align-items:center;justify-content:space-between;gap:8px
}
.slot .x{
  font-size:12px;color:#b11212;
  border:1px solid rgba(224,106,106,.45);
  background: rgba(224,106,106,.10);
  padding:2px 8px;border-radius:999px;cursor:pointer;
  opacity:.95
}
.slot.empty .pick{color:rgba(27,31,42,.35);font-weight:800}

.chips{display:flex;flex-wrap:wrap;gap:10px}
.chip{
  padding:12px 12px;border-radius:14px;
  border:1px solid var(--line);
  background: #ffffff;
  cursor:pointer;user-select:none;
  display:flex;align-items:center;justify-content:center;
  min-width:150px;
  font-weight:900;
  transition:.15s transform,.15s border-color,.15s box-shadow;
  box-shadow: 0 3px 10px rgba(15,23,42,.05);
}
.chip:hover{transform:translateY(-1px);border-color:rgba(124,92,255,.35)}
.chip.disabled{opacity:.45;cursor:not-allowed;transform:none}
.chip.selected{
  background: rgba(31,168,168,.10);
  border-color: rgba(31,168,168,.55);
  box-shadow: 0 0 0 3px rgba(31,168,168,.10) inset;
}

/* scale UI */
.scale{display:grid;gap:12px}
.row{
  border:1px solid var(--line);
  background: #fbfcff;
  border-radius:14px;padding:10px 12px
}
.rowtop{display:flex;gap:10px;align-items:center;justify-content:space-between}
.lbl{font-weight:900}
.pill{font-size:11px;color:var(--muted);border:1px solid rgba(109,118,138,.25);padding:2px 8px;border-radius:999px}
.scoreline{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:10px;flex-wrap:wrap}
.scoreBtns{display:flex;gap:6px;flex-wrap:wrap}
.sbtn{
  width:36px;height:34px;border-radius:12px;
  border:1px solid rgba(109,118,138,.25);
  background: #ffffff;
  color:var(--ink);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-weight:900;
  transition:.12s transform,.12s border-color,.12s background
}
.sbtn:hover{transform:translateY(-1px);border-color:rgba(124,92,255,.35)}
.sbtn.active{
  background: rgba(31,168,168,.12);
  border-color: rgba(31,168,168,.55);
  box-shadow: 0 0 0 3px rgba(31,168,168,.10) inset;
}
.ends{display:flex;gap:8px;color:var(--muted);font-size:11px;white-space:nowrap}

/* nav */
.nav{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:14px}
.leftNav{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
button{
  border:1px solid var(--line);
  background: #ffffff;
  color:var(--ink);
  padding:10px 12px;border-radius:14px;
  cursor:pointer;transition:.15s transform, .15s border-color;
  font-weight:900
}
button:hover{transform:translateY(-1px);border-color:rgba(31,168,168,.35)}
button:active{transform:translateY(0)}
.primary{
  background: linear-gradient(180deg, rgba(31,168,168,.98), rgba(79,70,229,.86));
  color:#fff;
  border-color:rgba(31,168,168,.45)
}
.ghost{background:transparent}
.danger{border-color:rgba(224,106,106,.55)}
.danger:hover{border-color:rgba(224,106,106,.85)}
.msg{color:var(--muted);font-size:12.5px}

/* ========== RESULT PAGE ========== */
.section{
  border:1px solid var(--line);
  border-radius:16px;
  background:#fff;
  box-shadow: var(--shadow);
  overflow:hidden;
  margin-top:14px;
}
.secHead{
  background: var(--purple);
  color:#fff;
  padding:14px 18px;
  font-weight:900;
  letter-spacing:.2px;
  display:flex;align-items:center;gap:10px;
  font-size:22px;
}
.secBody{padding:16px 18px 18px}

.namebar{
  background: var(--bluebar);
  border-radius:16px;
  padding:16px 18px;
  display:flex;gap:18px;align-items:center;flex-wrap:wrap;
  font-weight:900;
  color:#1c6fb8;
  margin-bottom:14px;
}
.namebar .lab{font-size:28px}
.namebar .sub{font-size:28px}
.namebar input{
  border:1px solid rgba(28,111,184,.25);
  border-radius:12px;
  padding:10px 12px;
  font-size:16px;
  font-weight:800;
  outline:none;
  min-width:220px;
  background:#fff;
}

.analysisGrid{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:18px;
  align-items:start;
}
@media (max-width:900px){ .analysisGrid{grid-template-columns:1fr} }

.barList{display:grid;gap:14px}
.barItem{display:grid;grid-template-columns: 34px 92px 1fr 70px;gap:12px;align-items:center}
.bubble{
  width:30px;height:30px;border-radius:999px;
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:900;
  font-size:14px;
}
.tname{font-weight:900;font-size:22px}
.track2{
  height:18px;border-radius:10px;background:#f3f5fb;
  position:relative;overflow:hidden;border:1px solid #eef1f7;
}
.fill2{height:100%;width:0;border-radius:10px}
.scoreTag{
  font-weight:900;
  color:#fff;
  padding:6px 10px;
  border-radius:10px;
  text-align:center;
  font-size:14px;
  min-width:66px;
}

.ruleBox{
  color:#3b3f4b;
  font-size:18px;
  line-height:1.8;
  padding-top:6px;
}
.ruleBox .hi{color:#e53935;font-weight:900}
.ruleBox .mid{color:#f59e0b;font-weight:900}
.ruleBox .lo{color:#3b82f6;font-weight:900}

.resultCode{
  margin-top:16px;
  background: var(--bluebar);
  border-radius:16px;
  padding:16px 18px;
  font-weight:900;
  color:#1c6fb8;
  font-size:26px;
}
.resultCode span{color:#1aa3a3}

/* Guide section */
.guideGrid{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:16px;
  align-items:stretch;
}
@media (max-width:900px){ .guideGrid{grid-template-columns:1fr} }

.guideCard{
  border:1px solid var(--line);
  background:#fff;
  min-height:320px;
  display:flex;
  flex-direction:column;
}
.guideTitle{
  font-weight:900;
  font-size:26px;
  color:#fff;
  padding:16px 16px;
  text-align:center;
}
.gBody{
  padding:16px 18px;
  color:#60656f;
  font-size:20px;
  line-height:1.75;
  flex:1;
}

/* ========== COVER PAGE ========== */
.cover{
  border:1px solid var(--line);
  background: linear-gradient(180deg, var(--coverSoft), #ffffff);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.coverTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:18px 18px 14px;
  border-bottom:1px solid var(--line);
}
.brandTitle{display:flex;gap:12px;align-items:flex-start}
.brandMark{
  width:44px;height:44px;border-radius:14px;
  background: linear-gradient(135deg, var(--coverMain), var(--coverDeep));
  box-shadow: 0 10px 18px rgba(245,158,11,.25);
  flex:0 0 44px;
}
.brandText h2{margin:0;font-size:28px;font-weight:1000}
.brandText p{
  margin:6px 0 0;
  color: var(--muted);
  font-size:14px;
  line-height:1.5;
}
.coverBtns{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:flex-end;
}
.cbtn{
  border:none;
  padding:12px 18px;
  border-radius:14px;
  cursor:pointer;
  font-weight:1000;
  color:#fff;
  font-size:18px;
  box-shadow: 0 10px 18px rgba(15,23,42,.12);
}
.cbtn.start{ background: linear-gradient(135deg, #f59e0b, #fbbf24); }
.cbtn.view{ background: linear-gradient(135deg, #fb923c, #f97316); }
.cbtn:active{ transform: translateY(1px); }

.coverHero{padding:18px 18px 6px}
.heroLine{display:flex;gap:12px;align-items:flex-start}
.heroBar{
  width:10px;
  min-height:90px;
  border-radius:999px;
  background: linear-gradient(180deg, var(--coverMain), var(--coverSub));
  flex:0 0 10px;
}
.heroText h3{margin:0;font-size:26px;font-weight:1000}
.heroText .quote{
  margin:10px 0 0;
  color: #475467;
  line-height:1.8;
  font-size:15px;
}
.heroText .quote b{font-weight:1000}

.coverMid{
  padding:8px 18px 18px;
  color: var(--muted);
  font-size:14px;
  line-height:1.8;
}

.featureTitle{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:1000;
  font-size:18px;
  margin:8px 18px 0;
  color: var(--coverDeep);
}
.featureTitle .diamond{
  width:10px;height:10px;
  display:inline-block;
  border-radius:3px;
  background: var(--coverMain);
}

.features{
  padding:10px 18px 20px;
  display:grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap:16px;
}
@media (max-width: 980px){
  .brandText h2{ font-size:24px; }
  .cbtn{ font-size:16px; }
  .features{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 520px){
  .features{ grid-template-columns: 1fr; }
}

.fcard{
  border:1px solid var(--line);
  background:#fff;
  border-radius:16px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  min-height:220px;
  box-shadow: 0 8px 18px rgba(15,23,42,.06);
}
.ficonWrap{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px 16px 12px;
}
.ficon{
  width:88px;height:88px;border-radius:999px;
  display:flex;align-items:center;justify-content:center;
  background: #fff3cd;
  color: var(--coverDeep);
  font-size:38px;
  border:2px solid rgba(245,158,11,.35);
   box-shadow: 0 8px 16px rgba(245,158,11,.25);
}
.fbar{
  margin-top:auto;
  padding:14px 14px;
  font-weight:900;
  color:#fff;
  line-height:1.4;
  background: linear-gradient(135deg, var(--coverMain), var(--coverSub));
}
/* çµæœåœ–å¡ï¼šæ”¾åœ¨èˆˆè¶£çµæœä¸‹é¢ */
.resultImageBlock{
  margin-top:14px;
  border:1px solid var(--line);
  border-radius:16px;
  background:#fff7e6;   /* æ·¡æ©˜åº•ï¼Œè·Ÿä½ ä¸»è‰²ä¸€è‡´ */
  padding:18px;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow: var(--shadow);
}

.resultImageBlock img{
  max-width:100%;
  height:auto;
  object-fit:contain;
}

.gap{height:12px}

.radarWrap{
  position:relative;
  width:min(760px, 100%);
}
.radarWrap img{
  display:block;
  width:100%;
  height:auto;
}
.radarWrap canvas{
  position:absolute;
  left:0; top:0;
  width:100%;
  height:100%;
  pointer-events:none;
}
.resultImageBlock{
  margin-top:14px;
  border:1px solid var(--line);
  border-radius:16px;
  background:#fff;
  padding:18px;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow: var(--shadow);
}

#radarChart{
  width:min(560px, 100%);
  aspect-ratio: 1 / 1;
  height:auto;
  display:block;
}

</style>

</head>

<body>
  <div class="wrap">

    <!-- Question header (hidden on result) -->
    <div class="topbar" id="topbar">
      <div class="title">
        <h1>Hollandæ¸¬é©—ï¼ˆ10é¡Œï¼‰</h1>
        <p id="subtitle">è«‹ä¾ç›´è¦ºä½œç­”</p>
      </div>
      <div class="progress">
        <div class="ptext" id="ptext">ç¬¬ 1 / 11 é </div>
        <div class="bar"><div id="pbar"></div></div>
      </div>
    </div>

    <div class="card" id="pageCard"></div>

  </div>

<script>
/** ====== RIASECï¼ˆå…§éƒ¨è¨ˆåˆ† & çµæœå‘ˆç¾ç”¨ï¼‰ ====== */
const RIASEC = [
  { key:"R", name:"å¯¦åšå‹",  desc:"å–œæ­¡å‹•æ‰‹åšã€å·¥å…·è¨­å‚™ã€æŠŠæ±è¥¿ä¿®å¥½åšå‡ºä¾†ã€‚", emoji:"ğŸ”§" },
  { key:"I", name:"ç ”ç©¶å‹",  desc:"å–„æ–¼è§€å¯Ÿã€æ€è€ƒã€åˆ†ææ¨ç†ï¼Œå–œæ­¡ç”¨é ­è…¦è§£æ±ºå•é¡Œä¸¦è¿½æ ¹ç©¶åº•ã€‚", emoji:"ğŸ”" },
  { key:"A", name:"è—è¡“å‹",  desc:"é‡è¦–å‰µæ„èˆ‡ç¾æ„Ÿï¼Œå–œæ­¡è¡¨é”é¢¨æ ¼ã€è¨­è¨ˆã€ç™¼æƒ³ã€‚", emoji:"ğŸ¨" },
  { key:"S", name:"ç¤¾äº¤å‹",  desc:"æ¨‚æ–¼åŠ©äººã€å–œæ­¡äº’å‹•èˆ‡å¼•å°ï¼Œé‡è¦–äººçš„æ„Ÿå—ã€‚", emoji:"ğŸ¤" },
  { key:"E", name:"ä¼æ¥­å‹",  desc:"ç²¾åŠ›æ—ºç››ã€å–œæ­¡ç«¶çˆ­èˆ‡å½±éŸ¿ä»–äººï¼Œæ“…é•·æ¨å‹•èˆ‡èªªæœã€‚", emoji:"ğŸ“£" },
  { key:"C", name:"å¸¸è¦å‹",  desc:"è¬¹æ…æœ‰æ¢ç†ï¼Œå–œæ­¡è¦çŸ©èˆ‡ç²¾ç¢ºï¼Œæ“…é•·æ•´ç†èˆ‡æµç¨‹ã€‚", emoji:"ğŸ—‚ï¸" },
];
const keyToMeta = Object.fromEntries(RIASEC.map(x => [x.key, x]));
/** ====== èˆˆè¶£å°èˆªï¼šç™½è©±è§£æï¼ˆåŠ å¼·ç‰ˆï¼‰ ====== */
const TYPE_GUIDE = {
  A: {
    tagline: "é éˆæ„Ÿåƒé£¯çš„äºº",
    bullets: [
      "å–œæ­¡å‰µæ„ã€è¨­è¨ˆã€è¡¨é”è‡ªæˆ‘ï¼Œå°ç¾æ„Ÿå¾ˆæ•æ„Ÿï¼Œè…¦ä¸­å¸¸å¸¸å¾ˆå¤šé»å­",
      "ä¸å¤ªæ„›è¢«è¦å‰‡ç¶ä½ï¼Œå¯¦å‹™ç´°ç¯€å’Œç‘£äº‹å®¹æ˜“è¦ºå¾—ç…©èº",
      "é©åˆç•«ç•«ã€å¯«ä½œã€è¨­è¨ˆã€è¡¨æ¼”é€™ç¨®å¯ä»¥è‡ªç”±ç™¼æ®çš„å·¥ä½œ",
    ],
  },
  C: {
    tagline: "æœ€æœƒæŠŠäº‹æƒ…æ•´ç†å¥½çš„äºº",
    bullets: [
      "å–œæ­¡æœ‰æµç¨‹ã€æœ‰è¦å‰‡ã€æœ‰è¡¨æ ¼çš„å·¥ä½œï¼Œé‡è¦–ç©©å®šèˆ‡ç§©åº",
      "åšäº‹ç´°å¿ƒè² è²¬ï¼Œä½†å°è®ŠåŒ–å’Œè‡¨æ™‚æ”¹å‹•æ¯”è¼ƒæ²’é‚£éº¼å–œæ­¡",
      "é©åˆè¡Œæ”¿ã€æœƒè¨ˆã€æ–‡æ›¸ã€å°ˆæ¡ˆç®¡ç†",
    ],
  },
  E: {
    tagline: "å¤©ç”Ÿå¸¶é ­è¡çš„é‚£ç¨®äºº",
    bullets: [
      "å–œæ­¡ä¸»å°ã€èªªæœã€å½±éŸ¿ä»–äººï¼Œæœ‰ä¼åœ–å¿ƒå’Œè¡Œå‹•åŠ›",
      "æœ‰æ™‚æœƒæ¯”è¼ƒæ€¥ã€é‡çµæœï¼Œç´°ç¯€å’Œè€å¿ƒéœ€è¦åˆ¥äººè£œè¶³",
      "é©åˆå‰µæ¥­ã€æ¥­å‹™ã€ä¸»ç®¡ã€è¡ŒéŠ·ã€å¸¶åœ˜éšŠ",
    ],
  },
  I: {
    tagline: "è…¦åŠ›å‹ç©å®¶",
    bullets: [
      "å–œæ­¡åˆ†æã€ç ”ç©¶ã€æ‰¾ç­”æ¡ˆï¼Œå°æ•¸å­—ã€ç†è«–ã€é‚è¼¯æœ‰èˆˆè¶£",
      "æ¯”è¼ƒäº«å—ç¨ç«‹å·¥ä½œï¼Œç¤¾äº¤å’Œæƒ…ç·’è¡¨é”ä¸æ˜¯æœ€å¼·é …",
      "é©åˆå·¥ç¨‹å¸«ã€ç ”ç©¶å“¡ã€æ•¸æ“šåˆ†æã€é¡§å•",
    ],
  },
  R: {
    tagline: "å‹•æ‰‹åšæœ€å®‰å¿ƒ",
    bullets: [
      "å–œæ­¡å¯¦éš›æ“ä½œã€ä¿®ç†ã€å»ºé€ ï¼Œçœ‹å¾—åˆ°æˆæœæœ€æœ‰æˆå°±æ„Ÿ",
      "ä¸å¤ªæ„›ç©ºè«‡ç†è«–ï¼Œæ¯”è¼ƒä¸æ“…é•·è¡¨é”å…§å¿ƒæ„Ÿå—",
      "é©åˆå·¥ç¨‹ã€æŠ€è¡“ã€ç¶­ä¿®ã€æˆ¶å¤–å·¥ä½œ",
    ],
  },
  S: {
    tagline: "ç‚ºäº†äººè€Œå­˜åœ¨çš„äºº",
    bullets: [
      "å–œæ­¡å¹«åŠ©åˆ¥äººã€èŠå¤©ã€é™ªä¼´ã€æ•™å­¸ï¼Œå¾ˆæœ‰åŒç†å¿ƒ",
      "æ€•è¡çªã€ä¸å¤ªæ„›åšå†·å†°å†°çš„æ±ºç­–",
      "é©åˆè€å¸«ã€ç¤¾å·¥ã€è«®è©¢ã€å®¢æœã€æ•™ç·´",
    ],
  },
};

/** ====== é¡Œåº«ï¼š1~6 æ’åºé¡Œï¼ˆUIä¸é¡¯ç¤ºå‹åˆ¥ï¼‰ ====== */
const sortQuestions = [
  { id:1, title:"æ–°å‰µå…¬å¸å°ˆæ¡ˆ",
    desc:"ä½ å‰›åŠ å…¥ä¸€é–“æ–°å‰µå…¬å¸ï¼Œåœ˜éšŠæ­£åœ¨é–‹ç™¼å…¨æ–°ç”¢å“ï¼Œè€é—†è«‹å¤§å®¶è‡ªè¡Œé¸æ“‡æœ€æƒ³æŠ•å…¥çš„å·¥ä½œå…§å®¹ã€‚è«‹ä¾ç…§ä½ å…§å¿ƒçœŸå¯¦åå¥½æ’åº",
    options:[ {text:"çµ„è£æ¸¬è©¦",type:"R"},{text:"æ•¸æ“šåˆ†æ",type:"I"},{text:"è¦–è¦ºè¨­è¨ˆ",type:"A"},{text:"åœ˜éšŠé—œæ‡·",type:"S"},{text:"å°å¤–è¡ŒéŠ·",type:"E"},{text:"æ–‡ä»¶æ•´ç†",type:"C"} ]
  },
  { id:2, title:"å¤§å‹æ´»å‹•ç±Œå‚™",
    desc:"ä½ åƒèˆ‡ä¸€å ´å¤§å‹æ´»å‹•çš„ç±Œå‚™åœ˜éšŠï¼Œå¤§å®¶å¯ä»¥è‡ªç”±é¸æ“‡æœ€æƒ³è² è²¬çš„å·¥ä½œå…§å®¹ï¼Œæ²’æœ‰å°éŒ¯ï¼Œåªçœ‹ä½ çš„çœŸå¯¦åå¥½",
    options:[ {text:"æ¶è¨­è¨­å‚™",type:"R"},{text:"æµç¨‹è¦åŠƒ",type:"I"},{text:"ä¸»è¦–è¦ºè¨­è¨ˆ",type:"A"},{text:"æ¥å¾…ä¾†è³“",type:"S"},{text:"æ‹›å‹Ÿè´ŠåŠ©",type:"E"},{text:"åå–®ç®¡ç†",type:"C"} ]
  },
  { id:3, title:"ç ”ç©¶è¨ˆç•«åœ˜éšŠ",
    desc:"ä½ è¢«é‚€è«‹åŠ å…¥è·¨é ˜åŸŸç ”ç©¶è¨ˆç•«ï¼Œåœ˜éšŠéœ€è¦åˆ†å·¥åˆä½œå®Œæˆä»»å‹™ï¼Œè«‹ä¾ä½ æœ€æƒ³æŠ•å…¥çš„è§’è‰²æ’åº",
    options:[ {text:"æ“ä½œå„€å™¨",type:"R"},{text:"é‚è¼¯æ¨ç†",type:"I"},{text:"ç™¼æƒ³æ¦‚å¿µ",type:"A"},{text:"å¼•å°å—è©¦è€…",type:"S"},{text:"æˆæœç™¼è¡¨",type:"E"},{text:"æ•¸æ“šæ•´ç†",type:"C"} ]
  },
  { id:4, title:"æ—…è¡Œçªç™¼ç‹€æ³",
    desc:"ä½ å’Œæœ‹å‹å‡ºåœ‹æ—…è¡Œæ™‚é‡åˆ°çªç™¼ç‹€æ³ï¼ŒåŸå®šè¡Œç¨‹è¢«æ‰“äº‚ï¼Œå¤§å®¶éœ€è¦è‡¨æ™‚åˆ†å·¥è™•ç†ï¼Œè«‹ä¾ä½ è‡ªç„¶æœƒæƒ³åšçš„äº‹æ’åº",
    options:[ {text:"è™•ç†äº¤é€šæ–¹å¼",type:"R"},{text:"é‡æ–°è¦åŠƒè·¯ç·š",type:"I"},{text:"æƒ³æ–°ç©æ³•",type:"A"},{text:"å®‰æ’«åœ˜å“¡",type:"S"},{text:"å”å•†æºé€š",type:"E"},{text:"æ›´æ–°è¡Œç¨‹",type:"C"} ]
  },
  { id:5, title:"ç¶“ç‡Ÿè‡ªåª’é«”",
    desc:"ä½ è¦å’Œæœ‹å‹ä¸€èµ·ç¶“ç‡Ÿè‡ªåª’é«”é »é“ï¼Œæ¯å€‹äººåˆ†å·¥åˆä½œï¼Œè«‹ä¾ä½ æœ€æƒ³è² è²¬çš„éƒ¨åˆ†æ’åº",
    options:[ {text:"æ‹æ”å‰ªè¼¯",type:"R"},{text:"ä¸»é¡Œç ”ç©¶",type:"I"},{text:"å…§å®¹å‰µæ„",type:"A"},{text:"ç¤¾ç¾¤äº’å‹•",type:"S"},{text:"å•†æ¥­åˆä½œ",type:"E"},{text:"å¾Œå°ç®¡ç†",type:"C"} ]
  },
  { id:6, title:"ä»»å‹™æ¨¡æ“¬ç³»çµ±",
    desc:"ä½ é€²å…¥ä¸€å€‹ä»»å‹™æ¨¡æ“¬ç³»çµ±ï¼Œåªèƒ½é¸æ“‡ä¸€å€‹ä¸»è¦è§’è‰²ä¾†å®Œæˆä»»å‹™ï¼Œè«‹ä¾ä½ æœ€æƒ³æ‰®æ¼”çš„è§’è‰²æ’åº",
    options:[ {text:"ä¿®å¾©ç³»çµ±",type:"R"},{text:"å•é¡Œåˆ†æ",type:"I"},{text:"å‰µæ„ç­–ç•¥",type:"A"},{text:"å¿ƒç†æ”¯æ´",type:"S"},{text:"ä»»å‹™æŒ‡æ®",type:"E"},{text:"è³‡è¨Šç®¡ç†",type:"C"} ]
  },
];

/** ====== é¡Œåº«ï¼š7~10 é‡è¡¨é¡Œï¼ˆé» 1~7ï¼›UIä¸é¡¯ç¤ºå‹åˆ¥ï¼‰ ====== */
const scaleSets = [
  { id:7, title:"å€‹æ€§å‚¾å‘é‡è¡¨",
    desc:"è«‹ä¾ä½ çœŸå¯¦çš„å€‹æ€§é¸æ“‡ç¬¦åˆç¨‹åº¦",
    left:"æœ€ä¸ç¬¦åˆ", right:"æœ€ç¬¦åˆ",
    items:[
      {text:"å–œæ­¡å‹•æ‰‹åšäº‹",type:"R"},{text:"åå¥½ç›´æ¥è¡Œå‹•",type:"R"},
      {text:"æ„›è¿½æ ¹ç©¶åº•",type:"I"},{text:"å°æ–°çŸ¥å¥½å¥‡",type:"I"},
      {text:"é‡è¦–ç¾æ„Ÿå‰µæ„",type:"A"},{text:"å–œæ­¡è‡ªæˆ‘è¡¨é”",type:"A"},
      {text:"å®¹æ˜“æ„Ÿå—ä»–äºº",type:"S"},{text:"å–œæ­¡å¹«äººæˆé•·",type:"S"},
      {text:"äº«å—å½±éŸ¿ä»–äºº",type:"E"},{text:"æƒ³å¸¶é ˜æ¨å‹•",type:"E"},
      {text:"å–œæ­¡è¦å‰‡æµç¨‹",type:"C"},{text:"åšäº‹æ³¨æ„ç´°ç¯€",type:"C"},
    ]
  },
  { id:8, title:"æ´»å‹•èˆˆè¶£é‡è¡¨",
    desc:"è«‹ä¾ä½ å°ä»¥ä¸‹æ´»å‹•çš„å–œå¥½ä½œç­”",
    left:"æœ€ä¸å–œæ­¡", right:"æœ€å–œæ­¡",
    items:[
      {text:"æ“ä½œå·¥å…·è¨­å‚™",type:"R"},{text:"DIY çµ„è£å®‰è£",type:"R"},
      {text:"è’é›†è³‡æ–™åˆ†æ",type:"I"},{text:"è§£æ±ºé‚è¼¯é›£é¡Œ",type:"I"},
      {text:"ç¹ªç•«è¨­è¨ˆä½œå“",type:"A"},{text:"ç™¼æƒ³å‰µæ„é»å­",type:"A"},
      {text:"é—œå¿ƒä»–äººç‹€æ…‹",type:"S"},{text:"æ•™å°é™ªä¼´ä»–äºº",type:"S"},
      {text:"èªªæœå½±éŸ¿ä»–äºº",type:"E"},{text:"ä¸»å°åœ˜é«”æ´»å‹•",type:"E"},
      {text:"æ•´ç†æ–‡ä»¶è³‡æ–™",type:"C"},{text:"å»ºç«‹æµç¨‹ç³»çµ±",type:"C"},
    ]
  },
  { id:9, title:"è·æ¥­å–œå¥½é‡è¡¨",
    desc:"ä¸è€ƒæ…®èƒ½åŠ›èˆ‡ç¾å¯¦æ¢ä»¶ï¼Œè«‹ä¾ä½ å°è·æ¥­çš„ç›´è¦ºå–œå¥½ä½œç­”",
    left:"æœ€ä¸å–œæ­¡", right:"æœ€å–œæ­¡",
    items:[
      {text:"è¨­å‚™ç¶­ä¿®äººå“¡",type:"R"},{text:"å·¥ç¨‹æŠ€è¡“äººå“¡",type:"R"},
      {text:"ç ”ç©¶åˆ†æäººå“¡",type:"I"},{text:"æ•¸æ“šç§‘å­¸å·¥ä½œ",type:"I"},
      {text:"è¦–è¦ºè¨­è¨ˆå·¥ä½œ",type:"A"},{text:"å…§å®¹å‰µä½œå·¥ä½œ",type:"A"},
      {text:"å¿ƒç†è¼”å°å·¥ä½œ",type:"S"},{text:"æ•™è‚²æ•™å­¸å·¥ä½œ",type:"S"},
      {text:"è¡ŒéŠ·ä¼åŠƒä¸»ç®¡",type:"E"},{text:"å‰µæ¥­ç¶“ç‡Ÿè€…",type:"E"},
      {text:"è¡Œæ”¿ç®¡ç†äººå“¡",type:"C"},{text:"æœƒè¨ˆäº‹å‹™äººå“¡",type:"C"},
    ]
  },
  { id:10, title:"èƒ½åŠ›è‡ªè©•é‡è¡¨",
    desc:"è«‹ä¾ä½ å°è‡ªèº«èƒ½åŠ›çš„æ„Ÿè¦ºä½œç­”",
    left:"æœ€ä¸ç¬¦åˆ", right:"æœ€ç¬¦åˆ",
    items:[
      {text:"èƒ½æ“ä½œå·¥å…·è¨­å‚™",type:"R"},{text:"èƒ½è§£æ±ºæŠ€è¡“å•é¡Œ",type:"R"},
      {text:"æ“…é•·åˆ†ææ¨ç†",type:"I"},{text:"èƒ½ç†è§£è¤‡é›œæ¦‚å¿µ",type:"I"},
      {text:"èƒ½å‰µä½œæˆ–è¨­è¨ˆ",type:"A"},{text:"æƒ³åƒåŠ›å¾ˆè±å¯Œ",type:"A"},
      {text:"èƒ½é«”å¯Ÿä»–äººæƒ…ç·’",type:"S"},{text:"äººéš›ç›¸è™•å¾ˆé †",type:"S"},
      {text:"èƒ½å½±éŸ¿ä»–äººæ±ºç­–",type:"E"},{text:"èƒ½å¸¶é ˜åœ˜éšŠè¡Œå‹•",type:"E"},
      {text:"å–„æ–¼è¦åŠƒèˆ‡æ•´ç†",type:"C"},{text:"åšäº‹ç´°å¿ƒæœ‰æ¢ç†",type:"C"},
    ]
  }
];
/** ====== é¡Œåº«ï¼š11~15 å–®é¸é¡Œï¼ˆæ€§æ ¼å‘ï¼›æ¯é¡Œ 6 é¸ 1ï¼›UIä¸é¡¯ç¤ºå‹åˆ¥ï¼‰ ====== */
const singleQuestions = [
  {
    id: 11,
    title: "ä½ æœ€å¸¸è¢«èªªçš„é¢¨æ ¼",
    desc: "å¦‚æœèº«é‚Šçš„äººç”¨ä¸€å¥è©±å½¢å®¹ä½ ï¼Œä½ è¦ºå¾—å“ªå€‹æœ€åƒï¼Ÿ",
    options: [
      { text: "å–œæ­¡ç›´æ¥æŠŠäº‹æƒ…å®Œæ•´åšå‡ºä¾†", type: "R" },
      { text: "ç¿’æ…£å…ˆæƒ³æ¸…æ¥šå†åŸ·è¡Œ", type: "I" },
      { text: "æ¯”è¼ƒé‡è¦–æ„Ÿå—èˆ‡ç¾æ„Ÿ", type: "A" },
      { text: å¾ˆæœƒç…§é¡§åˆ¥äººçš„æ„Ÿå—", type: "S" },
      { text: "å–œæ­¡æ¨å‹•å¤§å®¶å¾€å‰é€²", type: "E" },
      { text: "åšäº‹æœ‰è¦å‰‡ã€å¾ˆæœ‰æ¢ç†", type: "C" },
    ],
  },
  {
    id: 12,
    title: "ä½ çš„èƒ½é‡ä¾†æº",
    desc: "ç•¶ä½ ç‹€æ…‹ä¸å¥½ã€éœ€è¦å……é›»æ™‚ï¼Œä½ æœ€å®¹æ˜“è¢«å“ªç¨®æ–¹å¼æ‹‰å›ä¾†ï¼Ÿ",
    options: [
      { text: "å‹•ä¸€å‹•ã€åšé»å¯¦ä½œï¼Œèº«é«”å…ˆå›ä¾†", type: "R" },
      { text: "å®‰éœæ€è€ƒã€æ•´ç†è„ˆçµ¡ï¼Œè…¦è¢‹å›åˆ°æ¸…æ™°", type: "I" },
      { text: "æ²‰æµ¸åœ¨å‰µä½œã€éŸ³æ¨‚ã€å½±åƒæˆ–éˆæ„Ÿè£¡", type: "A" },
      { text: "æ‰¾äººèŠèŠã€è¢«ç†è§£æˆ–å»æ”¯æŒåˆ¥äºº", type: "S" },
      { text: "è¨­å®šç›®æ¨™ã€é–‹å§‹è¡Œå‹•ï¼Œè¶Šåšè¶Šæœ‰å‹", type: "E" },
      { text: "æ”¶æ‹¾ç’°å¢ƒã€æ’å¥½é †åºï¼Œç”Ÿæ´»è®Šå¾—å¯æ§", type: "C" },
    ],
  },
  {
    id: 13,
    title: "ä½ é¢å°é¸æ“‡çš„ç¿’æ…£",
    desc: "ç•¶ä½ è¦åšé‡å¤§æ±ºå®šï¼Œä½ æ›´å¸¸ç”¨å“ªç¨®æ–¹å¼ä¸‹åˆ¤æ–·ï¼Ÿ",
    options: [
      { text: "å…ˆè©¦å†èªªï¼Œåšäº†å°±çŸ¥é“å°ä¸å°", type: "R" },
      { text: "å…ˆåˆ†æåˆ©å¼Šã€è³‡è¨Šå¤ äº†æ‰æ±ºå®š", type: "I" },
      { text: "çœ‹æ„Ÿè¦ºèˆ‡æƒ³åƒï¼Œé¸é‚£å€‹æœ€æœ‰ç«èŠ±çš„", type: "A" },
      { text: "æƒ³æƒ³æœƒä¸æœƒå½±éŸ¿åˆ°åˆ¥äººã€é—œä¿‚å’Œè«§å—", type: "S" },
      { text: "çœ‹å“ªå€‹æ›´èƒ½é”æˆç›®æ¨™ã€å¸¶ä¾†æˆæœ", type: "E" },
      { text: "é¸é¢¨éšªè¼ƒå¯æ§ã€æµç¨‹è¼ƒç©©çš„é‚£å€‹", type: "C" },
    ],
  },
  {
    id: 14,
    title: "ä½ æœ€åœ¨æ„çš„è¢«å°Šé‡æ–¹å¼",
    desc: "ä½ æœ€å¸Œæœ›åˆ¥äººæ€éº¼å°ä½ ï¼Œæ‰æœƒè¦ºå¾—ã€Œæœ‰è¢«å°Šé‡ã€ï¼Ÿ",
    options: [
      { text: "åˆ¥äººä¿¡ä»»æˆ‘èƒ½æŠŠäº‹æƒ…åšå®Œï¼Œåˆ¥ç®¡å¤ªå¤š", type: "R" },
      { text: "åˆ¥äººé¡˜æ„è½æˆ‘æŠŠé‚è¼¯è¬›æ¸…æ¥šï¼Œä¸äº‚ä¸‹çµè«–", type: "I" },
      { text: "åˆ¥äººæ¬£è³æˆ‘çš„ç¨ç‰¹æƒ³æ³•ï¼Œä¸è¦æŠŠæˆ‘æ¡†ä½", type: "A" },
      { text: "åˆ¥äººé‡è¦–æˆ‘çš„æ„Ÿå—ï¼Œç”¨æº«å’Œæ–¹å¼æºé€š", type: "S" },
      { text: "åˆ¥äººçµ¦æˆ‘èˆå°èˆ‡æ±ºç­–ç©ºé–“ï¼Œè®“æˆ‘æ¨é€²", type: "E" },
      { text: "åˆ¥äººéµå®ˆç´„å®šèˆ‡è¦å‰‡ï¼Œäº‹æƒ…æŒ‰æ¨™æº–ä¾†", type: "C" },
    ],
  },
  {
    id: 15,
    title: "ä½ æœ€å—ä¸äº†çš„ç‹€æ³",
    desc: "åœ¨åœ˜éšŠæˆ–äººéš›è£¡ï¼Œå“ªç¨®ç‹€æ³æœ€å®¹æ˜“è®“ä½ ç¬é–“ç…©èºï¼Ÿ",
    options: [
      { text: "å…‰èªªä¸åšã€æ‹–æ‹–æ‹‰æ‹‰ï¼Œäº‹æƒ…éƒ½å¡ä½", type: "R" },
      { text: "ä¸è¬›è­‰æ“šåªæ†‘æ„Ÿè¦ºï¼Œé‚è¼¯äº‚ä¸ƒå…«ç³Ÿ", type: "I" },
      { text: "ä¸€ç›´è¢«é™åˆ¶ã€æ²’æœ‰ç©ºé–“ç™¼æ®å‰µæ„", type: "A" },
      { text: "è¬›è©±å¤ªå†·å¤ªè¡ï¼Œå®Œå…¨ä¸é¡§åˆ¥äººæ„Ÿå—", type: "S" },
      { text: "æ²’æœ‰æ–¹å‘ã€æ²’äººè² è²¬ï¼Œæ•´åœ˜æ•£æ‰", type: "E" },
      { text: "è¦å‰‡ä¸æ¸…ã€ä¸€ç›´æ”¹ä¾†æ”¹å»ï¼Œæµç¨‹è¶…æ··äº‚", type: "C" },
    ],
  },
];

/** ====== Pages ====== */
const pages = [
  { kind:"cover", id:0, data:null },
  ...sortQuestions.map(q => ({ kind:"sort", id:q.id, data:q })),
  ...scaleSets.map(s => ({ kind:"scale", id:s.id, data:s })),
  ...singleQuestions.map(q => ({ kind:"single", id:q.id, data:q })), // âœ… æ–°å¢
  { kind:"result", id:16, data:null },
];


/** ====== State ====== */
const state = {
  pageIndex: 0,
  sortAnswers: {},
  scaleAnswers: {},
  singleAnswers: {}, 
  userName: "",
};

const pageCard = document.getElementById("pageCard");
const ptext = document.getElementById("ptext");
const pbar = document.getElementById("pbar");
const subtitle = document.getElementById("subtitle");
const topbar = document.getElementById("topbar");

function renderPage(){
  const page = pages[state.pageIndex];
  pageCard.innerHTML = "";

  if (page.kind === "cover"){
    topbar.style.display = "none";
    pageCard.style.display = "block";
    pageCard.appendChild(renderCoverPage());
    window.scrollTo({top:0, behavior:"smooth"});
    return;
  }

  if (page.kind === "result"){
    topbar.style.display = "none";
    pageCard.style.display = "none";
    renderResultSections();
    window.scrollTo({top:0, behavior:"smooth"});
    return;
  }

  // questions
  topbar.style.display = "flex";
  pageCard.style.display = "block";
  updateHeader();

  if (page.kind === "sort") pageCard.appendChild(renderSortPage(page.data));
  if (page.kind === "scale") pageCard.appendChild(renderScalePage(page.data));
  if (page.kind === "single") pageCard.appendChild(renderSinglePage(page.data)); // âœ… æ”¾é€™è£¡
}

function updateHeader(){
  const cur = state.pageIndex + 1;
  const total = pages.length;
  ptext.textContent = `ç¬¬ ${cur} / ${total} é `;
  pbar.style.width = `${(cur/total)*100}%`;

}

/** ====== Sort Page ====== */
function renderCoverPage(){
  const wrap = document.createElement("div");
  wrap.className = "cover";

  wrap.innerHTML = `
    <div class="coverTop">
      <div class="brandTitle">
        <div class="brandMark"></div>
        <div class="brandText">
          <h2><span class="holland">Holland</span> <span class="tag">è·æ¶¯æ¸¬é©—</span></h2>
          <p>æ–½æ¸¬æ•¸è¶…é200è¬äººæ¬¡ï¼</p>
        </div>
      </div>

      <div class="coverBtns">
        <button class="cbtn start" id="btnStart">é–‹å§‹æ¸¬é©—</button>
        <button class="cbtn view" id="btnView">è§€çœ‹çµæœ</button>
      </div>
    </div>

    <div class="coverHero">
      <div class="heroLine">
        <div class="heroBar"></div>
        <div class="heroText">
          <h3>é‹ç”¨ä½ çš„å¤©è³¦ï¼Œåœ¨å°çš„ä½ç½®ç™¼å…‰ï¼</h3>
          <div class="quote">
            æ¯å€‹äººéƒ½æ˜¯å¤©æ‰ï¼Œä½†å¦‚æœä½ ç”¨çˆ¬æ¨¹çš„èƒ½åŠ›è©•æ–·ä¸€æ¢é­šï¼Œç‰ å°‡çµ‚å…¶ä¸€ç”Ÿè¦ºå¾—è‡ªå·±æ˜¯å€‹ç¬¨è›‹ã€‚<br>
            <b>â€” æ„›å› æ–¯å¦ï¼ˆAlbert Einsteinï¼‰</b>
          </div>
        </div>
      </div>
    </div>

    <div class="coverMid">
      åªè¦é€éè·æ¶¯æ¸¬é©—æŒæ¡èˆˆè¶£ã€åƒ¹å€¼è§€ã€ç‰¹è³ªç­‰é¢å‘ï¼Œå°±èƒ½æ‰¾åˆ°æœ€é©åˆè‡ªå·±ç™¼å±•çš„æ–¹å‘

    </div>

    <div class="featureTitle">
      <span class="diamond"></span>
      å››å¤§ç‰¹è‰²
    </div>

<div class="features">
  <div class="fcard">
    <div class="ficonWrap"><div class="ficon">â±ï¸</div></div>
    <div class="fbar">1.10åˆ†é˜ï¼Œçœ‹æ‡‚è·æ¶¯æ–¹å‘</div>
  </div>

  <div class="fcard">
    <div class="ficonWrap"><div class="ficon">ğŸ§ </div></div>
    <div class="fbar">2.äº†è§£è‡ªèº«æ·±å±¤å„ªå‹¢ç™¼æ®</div>
  </div>

  <div class="fcard">
    <div class="ficonWrap"><div class="ficon">ğŸ“Š</div></div>
    <div class="fbar">3.æ‰¾å°‹å€‹äººè·æ¶¯å®šä½</div>
  </div>

  <div class="fcard">
    <div class="ficonWrap"><div class="ficon">ğŸ“±</div></div>
    <div class="fbar">4.å€‹äººé—œä¿‚èª¿æ•´</div>
  </div>
</div>

  `;

  // é–‹å§‹æ¸¬é©—ï¼šè·³åˆ°ç¬¬ä¸€é¡Œï¼ˆå°é¢å¾Œçš„ç¬¬ 2 é ï¼‰
  wrap.querySelector("#btnStart").addEventListener("click", () => {
    state.pageIndex = 1; // cover æ˜¯ 0ï¼Œæ‰€ä»¥ç¬¬ä¸€é¡Œæ˜¯ 1
    renderPage();
    window.scrollTo({top:0, behavior:"smooth"});
  });

  // è§€çœ‹çµæœï¼šè‹¥æœªå®Œæˆå°±æé†’ï¼›å®Œæˆæ‰é€²çµæœé 
  wrap.querySelector("#btnView").addEventListener("click", () => {
    const ok = isAllComplete();
    if (!ok){
      alert("ä½ é‚„æ²’å®Œæˆä½œç­”ï½å…ˆæŒ‰ã€Œé–‹å§‹æ¸¬é©—ã€è·‘å®Œé¡Œç›®ï¼Œçµæœæ‰æœƒæº–å–” âœ…");
      return;
    }
    state.pageIndex = pages.length - 1;
    renderPage();
  });

  return wrap;
}
function isAllComplete(){
  // 1~6ï¼šæ’åºé¡Œéƒ½è¦å¡«æ»¿ 6 å€‹
  for (const q of sortQuestions){
    const picks = state.sortAnswers[q.id];
    if (!picks || picks.length !== 6) return false;
  }
  // 7~10ï¼šé‡è¡¨é¡Œæ¯ä¸€å°é¡Œéƒ½è¦å¡«
  for (const set of scaleSets){
    if (!isScaleComplete(set.id, set.items.length)) return false;
  }
  // 11~15ï¼šå–®é¸é¡Œæ¯é¡Œéƒ½è¦é¸ 1 å€‹
  for (const q of singleQuestions){
    const v = state.singleAnswers[q.id];
    if (!(v >= 0 && v < q.options.length)) return false;
  }
  return true;
}

function renderSortPage(q){
  const frag = document.createElement("div");

  const hd = document.createElement("div");
  hd.className = "hd";
  hd.innerHTML = `
    <div class="qno">é¡Œç›® ${q.id}</div>
    <div class="qtext">
      <p class="qtitle">${esc(q.title)}</p>
      <p class="qdesc">${esc(q.desc)}</p>
    </div>
  `;
  frag.appendChild(hd);

  const body = document.createElement("div");
  body.className = "body";

  const hint = document.createElement("p");
  hint.className = "hint";
  body.appendChild(hint);

  const picks = state.sortAnswers[q.id] || [];

  const rankbox = document.createElement("div");
  rankbox.className = "rankbox";
  for (let r=0; r<6; r++){
    const optIdx = picks[r];
    const isEmpty = (optIdx === undefined);
    const slot = document.createElement("div");
    slot.className = "slot" + (isEmpty ? " empty" : "");
    slot.innerHTML = `
      <div class="lab">ç¬¬ ${r+1} å</div>
      <div class="pick">
        <span>${esc(isEmpty ? "ï¼ˆå°šæœªé¸æ“‡ï¼‰" : q.options[optIdx].text)}</span>
        ${isEmpty ? "" : `<span class="x" data-r="${r}">Ã—</span>`}
      </div>
    `;
    rankbox.appendChild(slot);
  }
  body.appendChild(rankbox);

  const chips = document.createElement("div");
  chips.className = "chips";
  q.options.forEach((opt, idx) => {
    const used = picks.includes(idx);
    const chip = document.createElement("div");
    chip.className = "chip" + (used ? " disabled" : "");
    chip.textContent = opt.text;
    chip.addEventListener("click", () => {
      if (used) return;
      const cur = state.sortAnswers[q.id] ? [...state.sortAnswers[q.id]] : [];
      if (cur.length >= 6) return;
      cur.push(idx);
      state.sortAnswers[q.id] = cur;
      renderPage();
    });
    chips.appendChild(chip);
  });
  body.appendChild(chips);

  body.addEventListener("click", (e) => {
    const x = e.target.closest(".x");
    if (!x) return;
    const r = Number(x.dataset.r);
    const cur = state.sortAnswers[q.id] ? [...state.sortAnswers[q.id]] : [];
    cur.splice(r, 1);
    if (cur.length) state.sortAnswers[q.id] = cur;
    else delete state.sortAnswers[q.id];
    renderPage();
  });

  body.appendChild(renderNav({
    canPrev: state.pageIndex > 0,
    canNext: picks.length === 6,
    nextLabel: (state.pageIndex === pages.length - 2) ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ",
    onPrev: () => { state.pageIndex--; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    onNext: () => { state.pageIndex++; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    extraLeftButtons: [
      { label:"é‡æ–°é¸æ“‡", className:"ghost danger", onClick: () => { delete state.sortAnswers[q.id]; renderPage(); } }
    ],
  }));

  frag.appendChild(body);
  return frag;
}

/** ====== Scale Page (require all items chosen) ====== */
function renderScalePage(set){
  const frag = document.createElement("div");

  const hd = document.createElement("div");
  hd.className = "hd";
  hd.innerHTML = `
    <div class="qno">é¡Œç›® ${set.id}</div>
    <div class="qtext">
      <p class="qtitle">${esc(set.title)}</p>
      <p class="qdesc">${esc(set.desc)}</p>
    </div>
  `;
  frag.appendChild(hd);
  const body = document.createElement("div");
  body.className = "body";

  const hint = document.createElement("p");
  hint.className = "hint";
  body.appendChild(hint);

  if (!state.scaleAnswers[set.id]) state.scaleAnswers[set.id] = {};

  const scale = document.createElement("div");
  scale.className = "scale";

  set.items.forEach((it, idx) => {
    const v = state.scaleAnswers[set.id][idx] ?? null;

    const row = document.createElement("div");
    row.className = "row";
    row.innerHTML = `
      <div class="rowtop">
        <div class="lbl">${esc(it.text)}</div>
        <div><span class="pill" id="sv-${set.id}-${idx}">åˆ†æ•¸ï¼š${v ?? "æœªé¸"}</span></div>
      </div>
      <div class="scoreline">
        <div class="ends"><span>${esc(set.left)}ï¼ˆ1ï¼‰</span></div>
        <div class="scoreBtns"></div>
        <div class="ends"><span>${esc(set.right)}ï¼ˆ7ï¼‰</span></div>
      </div>
    `;

    const btnWrap = row.querySelector(".scoreBtns");
    for (let s=1; s<=7; s++){
      const b = document.createElement("div");
      b.className = "sbtn" + (s === v ? " active" : "");
      b.textContent = String(s);
      b.addEventListener("click", () => {
        state.scaleAnswers[set.id][idx] = s;
        btnWrap.querySelectorAll(".sbtn").forEach(x => x.classList.remove("active"));
        b.classList.add("active");
        row.querySelector(`#sv-${set.id}-${idx}`).textContent = `åˆ†æ•¸ï¼š${s}`;
        updateNavState(set);
      });
      btnWrap.appendChild(b);
    }

    scale.appendChild(row);
  });

  body.appendChild(scale);

  const nav = renderNav({
    canPrev: state.pageIndex > 0,
    canNext: isScaleComplete(set.id, set.items.length),
    nextLabel: (state.pageIndex === pages.length - 2) ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ",
    onPrev: () => { state.pageIndex--; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    onNext: () => { state.pageIndex++; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    extraLeftButtons: [
      { label:"å…¨éƒ¨æ¸…é™¤", className:"ghost danger", onClick: () => { state.scaleAnswers[set.id] = {}; renderPage(); } }
    ],
    note: scaleNote(set.id, set.items.length)
  });
  nav.id = "nav";
  body.appendChild(nav);

  frag.appendChild(body);
  return frag;
}
function renderSinglePage(q){
  const frag = document.createElement("div");

  const hd = document.createElement("div");
  hd.className = "hd";
  hd.innerHTML = `
    <div class="qno">é¡Œç›® ${q.id}</div>
    <div class="qtext">
      <p class="qtitle">${esc(q.title)}</p>
      <p class="qdesc">${esc(q.desc)}</p>
    </div>
  `;
  frag.appendChild(hd);

  const body = document.createElement("div");
  body.className = "body";

  const hint = document.createElement("p");
  hint.className = "hint";
  hint.textContent = "é¸ä¸€å€‹æœ€åƒä½ çš„å°±å¥½ï¼Œä¸ç”¨æƒ³å¤ªå¤šï½";
  body.appendChild(hint);

  const picked = state.singleAnswers[q.id];

  const chips = document.createElement("div");
  chips.className = "chips";

  q.options.forEach((opt, idx) => {
    const chip = document.createElement("div");
    const isSel = (picked === idx);
    chip.className = "chip" + (isSel ? " selected" : "");
    chip.textContent = opt.text;

    chip.addEventListener("click", () => {
      state.singleAnswers[q.id] = idx;
      renderPage();
    });

    chips.appendChild(chip);
  });

  body.appendChild(chips);

  body.appendChild(renderNav({
    canPrev: state.pageIndex > 0,
    canNext: (picked >= 0),
    nextLabel: (state.pageIndex === pages.length - 2) ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ",
    onPrev: () => { state.pageIndex--; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    onNext: () => { state.pageIndex++; renderPage(); window.scrollTo({top:0,behavior:"smooth"}); },
    extraLeftButtons: [
      { label:"æ¸…é™¤é¸æ“‡", className:"ghost danger", onClick: () => { delete state.singleAnswers[q.id]; renderPage(); } }
    ],
  }));

  frag.appendChild(body);
  return frag;
}

function renderNav({canPrev, canNext, nextLabel, onPrev, onNext, extraLeftButtons=[], note=""}){
  const nav = document.createElement("div");
  nav.className = "nav";

  const left = document.createElement("div");
  left.className = "leftNav";

  extraLeftButtons.forEach(b => {
    const btn = document.createElement("button");
    btn.className = b.className || "ghost";
    btn.textContent = b.label;
    btn.addEventListener("click", b.onClick);
    left.appendChild(btn);
  });

  if (canPrev){
    const prev = document.createElement("button");
    prev.className = "ghost";
    prev.textContent = "ä¸Šä¸€é¡Œ";
    prev.addEventListener("click", onPrev);
    left.appendChild(prev);
  }

  const right = document.createElement("div");
  right.className = "leftNav";

  const msg = document.createElement("div");
  msg.className = "msg";
  msg.id = "navMsg";
  msg.textContent = note;

  const next = document.createElement("button");
  next.className = "primary";
  next.textContent = nextLabel;
  next.disabled = !canNext;
  if (next.disabled){
    next.style.opacity = ".45";
    next.style.cursor = "not-allowed";
    next.style.transform = "none";
  }
  next.addEventListener("click", () => {
    if (!next.disabled) onNext();
  });

  right.appendChild(msg);
  right.appendChild(next);

  nav.appendChild(left);
  nav.appendChild(right);
  return nav;
}

function updateNavState(set){
  const nav = document.getElementById("nav");
  if (!nav) return;
  const nextBtn = nav.querySelector("button.primary");
  const msg = document.getElementById("navMsg");
  const ok = isScaleComplete(set.id, set.items.length);
  msg.textContent = scaleNote(set.id, set.items.length);

  nextBtn.disabled = !ok;
  nextBtn.style.opacity = ok ? "1" : ".45";
  nextBtn.style.cursor = ok ? "pointer" : "not-allowed";
}

function isScaleComplete(setId, n){
  const a = state.scaleAnswers[setId] || {};
  for (let i=0; i<n; i++){
    const v = a[i];
    if (!(v >= 1 && v <= 7)) return false;
  }
  return true;
}
function scaleNote(setId, n){
  const a = state.scaleAnswers[setId] || {};
  let filled = 0;
  for (let i=0; i<n; i++){
    const v = a[i];
    if (v >= 1 && v <= 7) filled++;
  }
  return (filled === n) ? "å¯ä»¥ä¸‹ä¸€é¡Œ" : `é‚„å·® ${n - filled} å°é¡Œ`;
}

function computeRawScores_Q1_10(){
  const score = {R:0,I:0,A:0,S:0,E:0,C:0};

  // sort: rank points 6..1
  sortQuestions.forEach(q => {
    const picks = state.sortAnswers[q.id];
    if (!picks || picks.length !== 6) return;
    for (let rank=0; rank<6; rank++){
      const opt = q.options[picks[rank]];
      score[opt.type] += (6 - rank);
    }
  });

  // scale: direct add 1..7
  scaleSets.forEach(set => {
    const a = state.scaleAnswers[set.id] || {};
    set.items.forEach((it, idx) => {
      score[it.type] += Number(a[idx] ?? 0);
    });
  });

  return score;
}
function computeRawScores_Q11_15(){
  const score = {R:0,I:0,A:0,S:0,E:0,C:0};

  singleQuestions.forEach(q => {
    const idx = state.singleAnswers[q.id];
    if (!(idx >= 0)) return;
    const opt = q.options[idx];
    score[opt.type] += 1;
  });

  return score;
}


// 1~10 æ¯å‹æœ€å¤§å€¼ï¼šæ’åº 6é¡Œ * (6+5+4+3+2+1)=21 => 126ï¼Œä½†åˆ†æ•£åˆ°å…­å‹ï¼ˆæ¯é¡Œæ¯å‹å„å‡ºç¾ä¸€æ¬¡ï¼‰
// ä½ åŸæœ¬çš„è¨ˆæ³•æ˜¯ã€Œæ¯å‹ sort æœ€å¤§ 36ã€(æ¯é¡Œæœ€å¤šæŠŠæŸå‹æ’ç¬¬ä¸€å¾—6ï¼Œå…±6é¡Œ=36) + scale æ¯å‹ 8é¡Œ*7=56 => 92
const MAX_Q1_10_PER_TYPE = 92;

// 11~15 æ¯å‹æœ€å¤§å€¼ï¼š5 é¡Œéƒ½é¸åŒä¸€å‹ => 5
const MAX_Q11_15_PER_TYPE = 5;

function clamp01(x){ return Math.max(0, Math.min(1, x)); }

// åŠ æ¬Šå¾Œçš„ã€Œ0~1ã€
function computeWeighted01(){
  const a = computeRawScores_Q1_10();
  const b = computeRawScores_Q11_15();

  const out = {R:0,I:0,A:0,S:0,E:0,C:0};
  for (const k of ["R","I","A","S","E","C"]){
    const n1 = clamp01((a[k] ?? 0) / MAX_Q1_10_PER_TYPE);
    const n2 = clamp01((b[k] ?? 0) / MAX_Q11_15_PER_TYPE);
    out[k] = 0.6 * n1 + 0.4 * n2;   // âœ… 60% / 40%
  }
  return out;
}

// é¡¯ç¤ºç”¨ 0~10ï¼ˆä½ å¾Œé¢è¦å‰‡ç”¨ 7.0 / 5.5 / 5.4 æ‰€ä»¥ç¶­æŒ 0~10ï¼‰
function to10_from01(n01){
  const v = n01 * 10;
  return Math.max(1, Math.min(10, v)); // ä¿ç•™ä½ åŸæœ¬çš„ä¸‹é™ç¿’æ…£
}

// çµ¦æ¢å½¢ç”¨çš„ç™¾åˆ†æ¯”ï¼ˆ0~100ï¼‰
function toPct_from01(n01){
  return n01 * 100;
}



function getTop3(scoreRaw){
  const sorted = Object.entries(scoreRaw).sort((a,b)=>b[1]-a[1]);
  return sorted.slice(0,3).map(([k,v])=>k);
}

function getClarityLabel(top1){
  // ç”¨ 0~100 çš„ top1 ä¾†åˆ¤æ–·ï¼ˆè·Ÿä½ æˆªåœ–é‚£æ®µè¦å‰‡ä¸€è‡´ï¼‰
  if (top1 >= 70) return "è¼ƒé«˜";
  if (top1 >= 55) return "ä¸­ç­‰";
  return "è¼ƒä½";
}
function drawRiasecRadar(canvas, score10){
  if (!canvas) return;

  const dpr = window.devicePixelRatio || 1;
  const cssSize = canvas.clientWidth || 520; // ä»¥ CSS å¯¬ç‚ºä¸»
  const size = Math.round(cssSize * dpr);

  canvas.width = size;
  canvas.height = size;

  const ctx = canvas.getContext("2d");
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

  const w = canvas.clientWidth;
  const h = canvas.clientHeight || w;

  ctx.clearRect(0,0,w,h);

  // === åŸºæœ¬è¨­å®š ===
  const cx = w / 2;
  const cy = h / 2;
  const R = Math.min(w, h) * 0.36;

  // è»¸é †åºï¼šR(ä¸Š) â†’ I â†’ A â†’ S(ä¸‹) â†’ E â†’ Cï¼ˆé †æ™‚é‡ï¼‰
  const axes = ["R","I","A","S","E","C"];
  const axisName = {
    R:"å¯¦åšå‹", I:"ç ”ç©¶å‹", A:"è—è¡“å‹", S:"ç¤¾äº¤å‹", E:"ä¼æ¥­å‹", C:"å¸¸è¦å‹"
  };

  // è§’åº¦ï¼šä¸Šæ–¹èµ·å§‹ -90Â°
  const start = -Math.PI / 2;
  const step = (Math.PI * 2) / axes.length;

  // === ç•«ç¶²æ ¼ï¼ˆåˆ»åº¦ 2/4/6/8/10ï¼‰===
  ctx.lineWidth = 1;
  ctx.strokeStyle = "rgba(15,23,42,.12)";
  ctx.fillStyle = "rgba(15,23,42,.55)";
  ctx.font = "12px ui-sans-serif, system-ui, -apple-system, 'Noto Sans TC', sans-serif";

  const rings = [2,4,6,8,10];
  rings.forEach(v => {
    const rr = R * (v / 10);
    ctx.beginPath();
    for (let i=0;i<axes.length;i++){
      const ang = start + step*i;
      const x = cx + rr * Math.cos(ang);
      const y = cy + rr * Math.sin(ang);
      if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    }
    ctx.closePath();
    ctx.stroke();
  });

  // è»¸ç·š
  for (let i=0;i<axes.length;i++){
    const ang = start + step*i;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + R*Math.cos(ang), cy + R*Math.sin(ang));
    ctx.stroke();
  }

  // åˆ»åº¦æ–‡å­—ï¼ˆæ”¾åœ¨ä¸Šæ–¹è»¸çš„å…§å´ï¼‰
  ctx.fillStyle = "rgba(102,112,133,.9)";
  rings.forEach(v => {
    const rr = R * (v / 10);
    ctx.fillText(String(v), cx + 6, cy - rr + 4);
  });

  // === å–åˆ†æ•¸ï¼ˆ1~10ï¼‰è½‰æˆé»åº§æ¨™ ===
  const pts = axes.map((k, i) => {
    const ang = start + step*i;
    const s = Math.max(1, Math.min(10, Number(score10[k] ?? 1)));
    const rr = R * (s / 10);
    return {
      k,
      s,
      x: cx + rr * Math.cos(ang),
      y: cy + rr * Math.sin(ang),
      ang
    };
  });

  // === ç•«è³‡æ–™å¤šé‚Šå½¢ ===
  ctx.beginPath();
  pts.forEach((p, idx) => idx===0 ? ctx.moveTo(p.x,p.y) : ctx.lineTo(p.x,p.y));
  ctx.closePath();

  // å¡«è‰²/ç·šè‰²ï¼šç”¨ä½ çš„å“ç‰Œ teal + indigo çš„æ„Ÿè¦º
  ctx.fillStyle = "rgba(31,168,168,.20)";
  ctx.strokeStyle = "rgba(31,168,168,.95)";
  ctx.lineWidth = 3;
  ctx.fill();
  ctx.stroke();

  // é»é»
  ctx.fillStyle = "rgba(79,70,229,.95)";
  pts.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 4, 0, Math.PI*2);
    ctx.fill();
  });

  // === å¤–åœˆæ¨™ç±¤ï¼ˆR/I/A/S/E/C + åˆ†æ•¸ï¼‰===
  ctx.fillStyle = "rgba(15,23,42,.88)";
  ctx.font = "13px ui-sans-serif, system-ui, -apple-system, 'Noto Sans TC', sans-serif";
  const labelR = R * 1.12;

  pts.forEach(p => {
    const lx = cx + labelR * Math.cos(p.ang);
    const ly = cy + labelR * Math.sin(p.ang);

    // å°é½Šï¼šé å·¦å³åˆ†ä½ˆ
    const cos = Math.cos(p.ang);
    if (cos > 0.25) ctx.textAlign = "left";
    else if (cos < -0.25) ctx.textAlign = "right";
    else ctx.textAlign = "center";

    ctx.textBaseline = "middle";
    ctx.fillText(`${p.k} ${axisName[p.k]}  ${p.s.toFixed(1)}`, lx, ly);
  });
}

/** ====== Result Sections (Analysis + Guide) ====== */
function renderResultSections(){
  // remove any previous sections
  document.querySelectorAll(".section").forEach(x => x.remove());

const w01 = computeWeighted01();

// é¡¯ç¤ºç”¨ï¼š1~10
const score10 = Object.fromEntries(Object.entries(w01).map(([k,v])=>[k,to10_from01(v)]));

// é•·æ¢ç”¨ï¼š0~100%
const pct = Object.fromEntries(Object.entries(w01).map(([k,v])=>[k,toPct_from01(v)]));

// Top3 ç”¨åŠ æ¬Šå¾Œçš„åˆ†æ•¸ï¼ˆæ›´ç¬¦åˆä½ æ–°è¦å‰‡ï¼‰
const top3 = Object.entries(score10)
  .sort((a,b)=>b[1]-a[1])
  .slice(0,3)
  .map(([k])=>k);

const code = top3.join("");

  // order fixed like screenshot
  const order = ["E","C","I","S","R","A"];

  const dateStr = formatDate(new Date());
  const top1Score = score10[top3[0]];

  // ===== Analysis
  const sec1 = document.createElement("div");
  sec1.className = "section";
  sec1.innerHTML = `
    <div class="secHead">â—· çµæœåˆ†æ Analysis</div>
    <div class="secBody">
      <div class="namebar">
        <div class="lab">å§“åï¼š</div>
        <input id="nameInput" placeholder="è«‹è¼¸å…¥å§“å" value="${esc(state.userName)}" />
        <div class="sub">æ—¥æœŸï¼š${dateStr}</div>
      </div>

      <div class="analysisGrid">
        <div class="barList" id="barList"></div>

        <div class="ruleBox">
          ä»¥ä¸Šåˆ†æ•¸ç”¨ä¾†è¡¨ç¤ºä½ å°è©²é¡å‹ä¹‹èˆˆè¶£ç¨‹åº¦é«˜ä½ï¼š<br>
        <span class="hi">7.0åˆ†ä»¥ä¸Š</span>ï¼šèˆˆè¶£ç¨‹åº¦è¼ƒé«˜ï¼Œå¯å„ªå…ˆé¸æ“‡æ­¤é¡å‹ç™¼å±•ã€‚<br>
<span class="mid">5.5~6.9åˆ†</span>ï¼šèˆˆè¶£ç¨‹åº¦ä¸­ç­‰ï¼Œä¸ç‰¹åˆ¥å–œæ­¡ä½†å°šå¯æ¥å—ã€‚<br>
<span class="lo">5.4åˆ†ä»¥ä¸‹</span>ï¼šèˆˆè¶£ç¨‹åº¦è¼ƒä½ï¼Œç”šè‡³å¯èƒ½æœ‰äº›æ’æ–¥ã€‚

        </div>
      </div>

      <div class="resultCode">
        ä½ çš„èˆˆè¶£çµæœï¼š <span>${code}</span>
      </div>
<div class="resultImageBlock">
  <canvas id="radarChart" aria-label="RIASEC é›·é”åœ–"></canvas>
</div>

</div>



      <div class="gap"></div>

      <div class="nav">
        <div class="leftNav">
          <button class="ghost" id="backToQ">å›åˆ°ä¸Šä¸€é¡Œ</button>
          <button class="danger ghost" id="resetAll">å…¨éƒ¨é‡å¡«</button>
        </div>
        <div class="leftNav">
          <button class="primary" id="copyBtn">è¤‡è£½çµæœ</button>
        </div>
      </div>
    </div>
  `;
  document.querySelector(".wrap").appendChild(sec1);
// âœ… ç­‰ canvas çœŸçš„å­˜åœ¨äº†å†æŠ“ã€å†ç•«
const radar = document.getElementById("radarChart");
const paintRadar = () => {
  if (!radar) return;
  // æœ‰æ™‚å€™å‰›æ’å…¥é‚£ä¸€ç¬é–“å°ºå¯¸é‚„æ²’ç®—å¥½ï¼Œè£œä¸€å€‹ä¿éšª
  requestAnimationFrame(() => drawRiasecRadar(radar, score10));
};

paintRadar();
window.addEventListener("resize", paintRadar);
  // draw bars
  const barList = document.getElementById("barList");
  order.forEach(k => {
    const m = keyToMeta[k];
   const w = pct[k];        // 0~100 ç”¨ä¾†ç•«é•·åº¦
const v = score10[k];    // 1~10 ç”¨ä¾†é¡¯ç¤ºåˆ†æ•¸
    const row = document.createElement("div");
    row.className = "barItem";
    row.innerHTML = `
      <div class="bubble" style="background: var(--c${k});">${k}</div>
      <div class="tname">${m.name}</div>
      <div class="track2"><div class="fill2" style="background: var(--c${k}); width:${Math.max(0,Math.min(100,w))}%;
"></div></div>
      <div class="scoreTag" style="background: var(--c${k});">${v.toFixed(1)}</div>
    `;
    barList.appendChild(row);
  });

  // name binding
  const nameInput = document.getElementById("nameInput");
  nameInput.addEventListener("input", () => { state.userName = nameInput.value.trim(); });

  // copy/back/reset
  document.getElementById("copyBtn").addEventListener("click", async () => {
 const sorted = Object.entries(score10).sort((a,b)=>b[1]-a[1]);
const top3txt = sorted.slice(0,3).map(([k,v]) => `${keyToMeta[k].name} ${v.toFixed(1)}`).join(" / ");
const txt = `å§“åï¼š${state.userName || "ï¼ˆæœªå¡«ï¼‰"}\næ—¥æœŸï¼š${dateStr}\nèˆˆè¶£çµæœï¼š${code}\nTop3ï¼š${top3txt}\nåˆ†æ•¸ï¼š` +
  order.map(k => `${k}:${score10[k].toFixed(1)}`).join(", ");

    try{ await navigator.clipboard.writeText(txt); alert("å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ âœ…"); }
    catch{ prompt("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ï¼š", txt); }
  });

  document.getElementById("backToQ").addEventListener("click", () => {
    // go back to Q10 page
    document.querySelectorAll(".section").forEach(x => x.remove());
    topbar.style.display = "flex";
    pageCard.style.display = "block";
    state.pageIndex = pages.length - 2;
    renderPage();
    window.scrollTo({top:0, behavior:"smooth"});
  });

  document.getElementById("resetAll").addEventListener("click", () => {
    if (!confirm("ç¢ºå®šè¦å…¨éƒ¨é‡å¡«å—ï¼Ÿ")) return;
    state.pageIndex = 0;
    state.sortAnswers = {};
    state.scaleAnswers = {};
    state.singleAnswers = {}; // âœ… æ–°å¢
    state.userName = "";
    document.querySelectorAll(".section").forEach(x => x.remove());
    topbar.style.display = "flex";
    pageCard.style.display = "block";
    renderPage();
    window.scrollTo({top:0, behavior:"smooth"});
  });

  // ===== Guide
  const sec2 = document.createElement("div");
  sec2.className = "section";
  sec2.innerHTML = `
    <div class="secHead">â–¶ èˆˆè¶£å°èˆª Guide</div>
    <div class="secBody">
      <div class="guideGrid">
        ${guideTypeCard("ä¸»å‹", top3[0], true)}
        ${guideTypeCard("å‰¯å‹", top3[1], false)}
        ${guideTypeCard("å‰¯å‹", top3[2], false)}
      </div>
    </div>
  `;
  document.querySelector(".wrap").appendChild(sec2);
} // âœ… é€™å€‹ä¸€å®šè¦æœ‰ï¼ï¼renderResultSections åˆ°é€™è£¡çµæŸ



function guideTypeCard(roleLabel, typeKey, isMain){
  const m = keyToMeta[typeKey];
  const g = TYPE_GUIDE[typeKey] || { tagline:"", bullets:[] };

const bg = isMain
  ? "linear-gradient(135deg, rgba(79,70,229,.95), rgba(31,168,168,.95))"
  : "linear-gradient(135deg, rgba(242,179,94,.95), rgba(31,168,168,.75))";


  const bulletsHtml = (g.bullets || [])
    .map(t => `<li>${esc(t)}</li>`)
    .join("");

  return `
    <div class="guideCard">
      <div class="guideTitle" style="background:${bg}">
        ${roleLabel}ï¼š${m.name}
      </div>

      <div class="gBody">
        <div style="font-weight:900;color:#2c7bd3;margin-bottom:8px;">
          ${typeKey} ${m.name}ï¼š${esc(g.tagline)}
        </div>

        <ul style="margin:0;padding-left:22px;">
          ${bulletsHtml}
        </ul>

        <div style="margin-top:10px;color:#8a93a3;font-size:16px;line-height:1.6;">
        </div>
      </div>
    </div>
  `;
}

/** ====== Result Nav ====== */
function goToResult(){
  state.pageIndex = pages.length - 1;
  renderPage();
}

/** ====== Utilities ====== */
function esc(str){
  return String(str ?? "")
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function drawRiasecRadarOnImage(pctMap){
  const img = document.getElementById("radarImg");
  const canvas = document.getElementById("radarCanvas");
  if (!img || !canvas) return;

  const dpr = window.devicePixelRatio || 1;

  // è®“ canvas åƒç´ å°ºå¯¸è·Ÿåœ–ç‰‡é¡¯ç¤ºå°ºå¯¸ä¸€è‡´ï¼ˆç•«èµ·ä¾†æ‰ä¸ç³Šï¼‰
  const cw = img.clientWidth;
  const ch = img.clientHeight;
  if (cw <= 0 || ch <= 0) return;

  canvas.width = Math.round(cw * dpr);
  canvas.height = Math.round(ch * dpr);

  const ctx = canvas.getContext("2d");
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // ç”¨ CSS åƒç´ ä½œç•«

  ctx.clearRect(0, 0, cw, ch);

  // === é€™çµ„åº§æ¨™æ˜¯ä¾ä½ æä¾›çš„é‚£å¼µåº•åœ–ï¼ˆ710x512ï¼‰é‡å‡ºä¾†çš„æ¯”ä¾‹ ===
  const CX = cw * 0.427;
  const CY = ch * 0.430;
  const R  = Math.min(cw, ch) * 0.367;

  // è»¸é †åºï¼šR(ä¸Š) â†’ I â†’ A â†’ S(ä¸‹) â†’ E â†’ Cï¼ˆé †æ™‚é‡ï¼‰
  const axes = ["R","I","A","S","E","C"];
  const startDeg = -90;
  const stepDeg = 360 / axes.length;

  const pts = axes.map((k, i) => {
    const deg = startDeg + stepDeg * i;
    const rad = deg * Math.PI / 180;
    const p = Math.max(0, Math.min(100, Number(pctMap[k] ?? 0)));
    const rr = R * (p / 100);
    return { x: CX + rr * Math.cos(rad), y: CY + rr * Math.sin(rad) };
  });

  // å¡«è‰² + å¤–æ¡†ï¼ˆç”¨ä½ çš„å“ç‰Œè‰²ç³»ï¼‰
  ctx.beginPath();
  pts.forEach((p, idx) => idx === 0 ? ctx.moveTo(p.x, p.y) : ctx.lineTo(p.x, p.y));
  ctx.closePath();

  ctx.fillStyle = "rgba(31,168,168,0.22)";
  ctx.strokeStyle = "rgba(31,168,168,0.9)";
  ctx.lineWidth = 3;

  ctx.fill();
  ctx.stroke();

  // æ¯å€‹é»åŠ å°åœ“é»ï¼ˆæ›´æœ‰æ„Ÿï¼‰
  ctx.fillStyle = "rgba(79,70,229,0.95)";
  pts.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 4.5, 0, Math.PI * 2);
    ctx.fill();
  });
}

function formatDate(d){
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  return `${y}/${m}/${dd}`;
}

/** ====== Init ====== */
renderPage();

// When last question "next" pressed, it naturally goes to result page because pages include result as last page.
// So ensure Q10 next goes to result:
(function patchLastNext(){
  // nothing needed; pages already include result, navigation increments pageIndex.
})();
</script>
</body>
</html> 
